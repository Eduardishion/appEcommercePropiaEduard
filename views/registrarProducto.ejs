<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="shortcut icon" href="images/imagenesIndex/logo_16_x_16.svg" type="image/x-icon">
		<!-- iconos -->
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
		<!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" -->
		<!-- fuentes externas -->
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet"> 
		<link href="https://fonts.googleapis.com/css2?family=KoHo:wght@300;600&display=swap" rel="stylesheet"> 
		<!-- hojas de estilo -->
		<link rel="stylesheet" href="/css/normalize.css">
		<link rel="stylesheet" href="/css/index.css">
		<link rel="stylesheet" href="/css/modal-styles.css">
		<link rel="stylesheet" href="/css/registrarProducto.css">
		<title>Eduardishion-shop</title>
	</head>
<body>
    <!-- vista parcial de header -->
    <header id="encabesado">
			<img id="logo" src="/images/imagenesIndex/logo_16_x_16.svg"/> 
			<nav id="barraNavegacion">
				<ul>
					<li><a href="Index">Catálogo</a></li><!-- esta vista  para productos y cetegorias-->
					<li><a href="#">Enlace</a></li>
				</ul>
			</nav>
			<div id="menuAmbuergesa">
				<label for="desplegar">
					<i class="fas fa-bars"></i>
				</label>
			</div>
			<div id="logos">
				<img  id="logoSearch" src="/images/imagenesIndex/search_white_24dp.svg"/>
				<img  id="logoShop" src="/images/imagenesIndex/shopping_cart_white_24dp.svg"/>
				<a href="Registro"> <img  id="logoShop" src="/images/imagenesIndex/perm_identity_white_24dp.svg"/></a>
			</div>
	</header>
	<!-- menu desplegable  -->
	<input type="checkbox" name="desplegar" id="desplegar" hidden>
	<ul id="menuVertical" >
		<li><a href="Index">Index</a></li>
		<li><a href="DetalleProducto">Producto</a></li>
		<li><a href="CarritoCompra">Carrito</a></li>
		<li><a href="#">Enlace</a></li>
		<li><a href="#">Enlace</a></li>
	</ul>
	<!-- menu desplegable  -->

	<!-- menu de lista productos  -->
	<input type="checkbox" name="desplegar2" id="desplegar2" hidden>
	<div class="model-overlay active" ><!--caja transparente-->
		<div class="modal"><!--caja blanca-->
			<div id="form">
				<h2>Lista de productos</h2>
				<form action="/CarritoCompra" method="get" id="formulario">
					<a href="/DetalleProducto">
						<div class="productoLista">
							<div class="eliminar">
								<img src="/images/imagenesModal/cancel_black_24dp.svg" alt="">
							</div>
							<div>
								<img src="/images/maquinita-izquierda.png" alt="imagen de producto" class="imagenLista">
							</div>
							<div>
								<p class="nombreLista">
									Pro System Audiotek Tablero Arcade Videojuegos
								</p>
							</div>   
						</div>
					</a>
					<a href="/DetalleProducto">
						<div class="productoLista">
							<div class="eliminar">
								<img src="/images/imagenesModal/cancel_black_24dp.svg" alt="">
							</div>
							<div>
								<img src="/img/maquinita-izquierda.png" alt="imagen de producto" class="imagenLista">
							</div>
							<div>
								<p class="nombreLista">
									Pro System Audiotek Tablero Arcade Videojuegos
								</p>
							</div>   
						</div>
					</a>
					<a href="/DetalleProducto">
						<div class="productoLista">
							<div class="eliminar">
								<img src="/images/imagenesModal/cancel_black_24dp.svg" alt="">
							</div>
							<div>
								<img src="/img/maquinita-izquierda.png" alt="imagen de producto" class="imagenLista">
							</div>
							<div>
								<p class="nombreLista">
									Pro System Audiotek Tablero Arcade Videojuegos
								</p>
							</div>   
						</div>
					</a>
					<div class="input-group actions">
						<a href="/CarritoCompra" type="submit" class="botonPrimario">Ver carrito</a>
					</div>
				</form>
			</div>
		</div>
	</div>
    <main id="areaPrincipal">
			<section id="vistaCrearProductos">
				<h1>Registrar de Producto</h1>
				
				<div id="botonVista">
					<a type="submit" href="/productos/listaProductos" class="botonPrimario">
						<i class="fas fa-list-alt"></i>
					</a>
				</div>
				<div id="contenedorDeFormulario">
					<!-- <% if( locals.msgsErrors ){ %>		
						<% for (error in msgsErrors) {%>
							<p class="errorDatosE" ><%= msgsErrors[error].msg %></p>
						<% } %>
					<% } %> -->
						<form action="/productos/guardarProducto" method="POST" enctype="multipart/form-data">
							<div>
								<!-- el valor del cambiante se agregara automaticamente -->
								<label id="personal" for="userWhoRegistered">Personal que registra:</label>
								<input type="text" name="userWhoRegistered" readonly value="Admin Root" class="inputWidth styleInput">
							</div>
							<div>
								<label for="id">
									<!-- <strong>ID:</strong>  -->
									<input type="text" name="id" value="<%= locals.DataOld ? DataOld.id : null %>" placeholder="ID">
								</label>
								<div class="errorDatosE">
									<% if( locals.msgsErrors && msgsErrors.id){ %>
										<p class="errorDatosE" ><%= msgsErrors.id.msg %></p>
									<% } %>
								</div>
							</div>
							<div>
								<label for="name">
									<!-- <strong>Nombre:</strong>  -->
									<input type="text" name="name" value="<%= locals.DataOld ? DataOld.name : null %>" placeholder="Nombre">
								</label>
								<div class="errorDatosE">
									<% if( locals.msgsErrors && msgsErrors.name){ %>
										<p class="errorDatosE" ><%= msgsErrors.name.msg %></p>
									<% } %>
								</div>
							</div>
							<div>
								<label for="category">
									<!-- <strong>Categoria:</strong>  -->
									<br>
									<select 
										name="category" 
										id="SelectOp"
									>
										<option  value="" > Elige una categoria </option>
										
										<%
											let categorias = ['Tableros','Futbolitos','Maquinitas','Accesorios'];
										%>

										<% for (const categoria of categorias) { %>
											
											<option  value=" <%= categoria %> " 
												
												<%= locals.DataOld && (categoria === DataOld.category.trim()) ? "selected" : null %>	> 
												
												<%= categoria %> </option>

										<% } %>

									</select>
									<div class="errorDatosE">
										<% if( locals.msgsErrors && msgsErrors.category){ %>
											<p class="errorDatosE" ><%= msgsErrors.category.msg %></p>
										<% } %>
									</div>
									<!-- <input type="text" name="category"   value="<%=  locals.DataOld && DataOld.category  ? DataOld.category  : '' %> " > -->
								</label>
							</div>
							<div>
								<label for="price">
									<!-- <strong>Precio:</strong> -->
									<input type="text" name="price" value="<%= locals.DataOld ? DataOld.price : null %>" placeholder="Precio">
								</label>
								<div class="errorDatosE">
									<% if( locals.msgsErrors && msgsErrors.price){ %>
										<p class="errorDatosE" ><%= msgsErrors.price.msg %></p>
									<% } %>
								</div>
							</div>
							<div>
								<label for="discountRate">
									<!-- <strong>% de descuento:</strong> -->
									<input type="text" name="discountRate" value="<%= locals.DataOld ? DataOld.discountRate : null %>" placeholder="Descuento">
								</label>
								<div class="errorDatosE">
									<% if( locals.msgsErrors && msgsErrors.discountRate){ %>
										<p class="errorDatosE" ><%= msgsErrors.discountRate.msg %></p>
									<% } %>
								</div>
							</div>
							<div>
								<label for="stock">
									<!-- <strong>Existencias:</strong> -->
									<input type="text" name="stock" value="<%= locals.DataOld ? DataOld.stock : null %>" placeholder="Existencia">
								</label>
								<div class="errorDatosE">
									<% if( locals.msgsErrors && msgsErrors.stock){ %>
										<p class="errorDatosE" ><%= msgsErrors.stock.msg %></p>
									<% } %>
								</div>
							</div>
							<div>
								<label for="features">
									<!-- <strong>Caracteristicas:</strong> -->
									<input type="text" name="features" value="<%= locals.DataOld ? DataOld.features : null %>" placeholder="Caracteristicas">
								</label>
								<div class="errorDatosE">
									<% if( locals.msgsErrors && msgsErrors.features){ %>
										<p class="errorDatosE" ><%= msgsErrors.features.msg %></p>
									<% } %>
								</div>
							</div>
							<div>
								<label for="description">
									<!-- <strong>Descripción:</strong> -->
									<textarea  type="text" name="description"><%= locals.DataOld ? DataOld.description : null %></textarea>
								</label>
								<div class="errorDatosE">
									<% if( locals.msgsErrors && msgsErrors.description){ %>
										<p class="errorDatosE" ><%= msgsErrors.description.msg %></p>
									<% } %>
								</div>
							</div>
							<!-- primera version con dos inputs separados -->
							<!---al no requerir y no cargan imagen al mostrar las imgenes de producto madaremos una por defatul -->
							<!-- <div>
								<label for="imageProducto">
									<strong>Imagen principal:</strong>
									<input type="file" name="imageProducto" > 
								</label>
								<div class="errorDatosE">
									<% if( locals.msgsErrors && msgsErrors.image){ %>
										<p class="errorDatosE" ><%= msgsErrors.image.msg %></p>
									<% } %>
								</div>
							</div>
							<div>
								<label for="imageSecundariasProducto">
									<strong>Imagenes Secundarias:</strong>
									<input type="file" name="imageSecundariasProducto" multiple> 
								</label>
								<div class="errorDatosE">
									<% if( locals.msgsErrors && msgsErrors.imageSec){ %>
										<p class="errorDatosE" ><%= msgsErrors.imageSec.msg %></p>
									<% } %>
								</div>
							</div> -->
							<div>
								<label for="imagesProducto">Imagenes del producto</label>
								<input type="file" name="imagesProducto" multiple>
								<div class="errorDatosE">
									<% if( locals.msgsErrors && msgsErrors.imagesProducto){ %>
										<p class="errorDatosE" ><%= msgsErrors.imagesProducto.msg %></p>
									<% } %>
								</div> 
							</div>
							<div id="boton">
								<input type="submit" value="Crear" class="botonPrimario">
							</div>
							<!-- se recomienda en passwords no persistir los datos no retornes los valores del body 
								pagina oficial de profesor digital house:
								Javi Herrera
								https://www.javier-herrera.com/
								https://www.linkedin.com/in/japsolo/
							-->
						</form>
				</div>
			</section>
	</main>
    <%- include('partials/Footer.ejs') %>
</body>
</html>