<!DOCTYPE html>
<html lang="en">
	<%- include('partials/Head.ejs') %>
	<body>
		<%- include('partials/cabecera.ejs') %>
		<main id="areaPrincipal">
				<section id="vistaCrearProductos">
					<h1>Edición de Producto</h1>
					<div id="contenedorDeFormulario">
						<div id="botonera">
							<a  href="/productos/listaProductos" class="botonPrimario">
								Cancelar
							</a>
						</div>
						<% if( locals.msgsErrors ){ %>
							<form action="/productos/actulizaProducto/<%= DataOld.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
								<div>
									<!-- el valor del cambiante se agregara automaticamente -->
									<label id="personal" for="userWhoRegistered">Personal que registra:</label>
									<input type="text" name="userWhoRegistered" readonly value="Admin Root" class="inputWidth styleInput">
								</div>
								<!-- <div>
									<label id="id" for="id">ID Producto:</label>
									<input type="number" name="id"  readonly  value="<%=  DataOld.id  %>" class="inputWidth styleInput">
								</div> -->
								<div>
									<label for="id">
										<strong>ID:</strong> 
										<input type="text" name="id" value="<%= locals.DataOld ? DataOld.id : null %>" placeholder="ID">
									</label>
									<div class="errorDatosE">
										<% if( locals.msgsErrors && msgsErrors.id){ %>
											<p class="errorDatosE" ><%= msgsErrors.id.msg %></p>
										<% } %>
									</div>
								</div>
								<div>
									<label for="name">
										<strong>Nombre:</strong> 
										<input type="text" name="name" value="<%= locals.DataOld ? DataOld.name : null %>" placeholder="Nombre">
									</label>
									<div class="errorDatosE">
										<% if( locals.msgsErrors && msgsErrors.name){ %>
											<p class="errorDatosE" ><%= msgsErrors.name.msg %></p>
										<% } %>
									</div>
								</div>
								<div>
									<label for="category">
										<strong>Categoria:</strong> 
										<br>
										<select 
											name="category" 
											id="SelectOp"
										>
											<option  value="" > Elige una categoria </option>
											
											<%
												let categorias = ['Tableros','Futbolitos','Maquinitas','Accesorios'];
											%>

											<% for (const categoria of categorias) { %>
												
												<option  value=" <%= categoria %> " 
													
													<%= locals.DataOld && (categoria === DataOld.category.trim()) ? "selected" : null %>	> 
													
													<%= categoria %> </option>

											<% } %>

										</select>
										<div class="errorDatosE">
											<% if( locals.msgsErrors && msgsErrors.category){ %>
												<p class="errorDatosE" ><%= msgsErrors.category.msg %></p>
											<% } %>
										</div>
										<!-- <input type="text" name="category"   value="<%=  locals.DataOld && DataOld.category  ? DataOld.category  : '' %> " > -->
									</label>
								</div>
								<div>
									<label for="price">
										<strong>Precio:</strong>
										<input type="text" name="price" value="<%= locals.DataOld ? DataOld.price : null %>" placeholder="Precio">
									</label>
									<div class="errorDatosE">
										<% if( locals.msgsErrors && msgsErrors.price){ %>
											<p class="errorDatosE" ><%= msgsErrors.price.msg %></p>
										<% } %>
									</div>
								</div>
								<div>
									<label for="discountRate">
										<strong>% de descuento:</strong>
										<input type="text" name="discountRate" value="<%= locals.DataOld ? DataOld.discountRate : null %>" placeholder="Descuento">
									</label>
									<div class="errorDatosE">
										<% if( locals.msgsErrors && msgsErrors.discountRate){ %>
											<p class="errorDatosE" ><%= msgsErrors.discountRate.msg %></p>
										<% } %>
									</div>
								</div>
								<div>
									<label for="stock">
										<strong>Existencias:</strong>
										<input type="text" name="stock" value="<%= locals.DataOld ? DataOld.stock : null %>" placeholder="Existencia">
									</label>
									<div class="errorDatosE">
										<% if( locals.msgsErrors && msgsErrors.stock){ %>
											<p class="errorDatosE" ><%= msgsErrors.stock.msg %></p>
										<% } %>
									</div>
								</div>
								<div>
									<label for="features">
										<strong>Caracteristicas:</strong>
										<input type="text" name="features" value="<%= locals.DataOld ? DataOld.features : null %>" placeholder="Caracteristicas">
									</label>
									<div class="errorDatosE">
										<% if( locals.msgsErrors && msgsErrors.features){ %>
											<p class="errorDatosE" ><%= msgsErrors.features.msg %></p>
										<% } %>
									</div>
								</div>
								<div>
									<label for="description">
										<strong>Descripción:</strong>
										<textarea  type="text" name="description"><%= locals.DataOld ? DataOld.description : null %></textarea>
									</label>
									<div class="errorDatosE">
										<% if( locals.msgsErrors && msgsErrors.description){ %>
											<p class="errorDatosE" ><%= msgsErrors.description.msg %></p>
										<% } %>
									</div>
								</div>
								<div>
									<label for="imagesProducto">Imagenes del producto</label>
									<input type="file" name="imagesProducto" multiple>
									<div class="errorDatosE">
										<% if( locals.msgsErrors && msgsErrors.imagesProducto){ %>
											<p class="errorDatosE" ><%= msgsErrors.imagesProducto.msg %></p>
										<% } %>
									</div> 
								</div>
								<div id="boton">
									<input type="submit" value="Crear" class="botonPrimario">
								</div>
							</form>
						<% } else { %>
							<form action="/productos/actulizaProducto/<%= producto.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
							
								<div>
									<!-- el valor del cambiante se agregara automaticamente -->
									<label id="personal" for="userWhoRegistered">Personal que registra:</label>
									<input type="text" name="userWhoRegistered" readonly value="Admin Root" class="inputWidth styleInput">
								</div>
								<div>
									<label for="id">
										<!-- <strong>ID:</strong>  -->
										<input type="number" name="id" placeholder="ID"  value="<%= producto.id %>" >
									</label>
								</div>
								<div>
									<label for="name">
										<!-- <strong>Nombre:</strong>  -->
										<input type="text" name="name" placeholder="Nombre"  value="<%= producto.name %>" >
									</label>
								</div>
								<div>
									<label for="category">
										<!-- <strong>Categoria:</strong>  -->
										<br>
										<select 
												name="category" 
												id="SelectOp"
											>
												<option  value="" > Elige una categoria </option>
												
												<%
													let categorias = ['Tableros','Futbolitos','Maquinitas','Accesorios'];
												%>
		
												<% for (const categoria of categorias) { %>
													
													<option  value=" <%= categoria %> " 
														
														<%= (categoria === producto.category.trim()) ? "selected" : null %>	> 
														
														<%= categoria %> </option>
		
												<% } %>
		
										</select>
									</label>
								</div>
								<div>
									<label for="price">
										<!-- <strong>Precio:</strong> -->
										<input type="number" name="price" placeholder="Precio" min="1" value="<%= producto.price %>"  >
									</label>
								</div>
								<div>
									<label for="discountRate">
										<!-- <strong>% de descuento:</strong> -->
										<input type="number" name="discountRate" placeholder="Porcentaje de descuento" min="1" class="descuento" value="<%= producto.discountRate %>"  >
									</label>
								</div>
								<div>
									<label for="stock">
										<!-- <strong>Existencias:</strong> -->
										<input type="number" name="stock" placeholder="Existencias" min="1"  value="<%= producto.stock %>"  >
									</label>
								</div>
								<div>
									<label for="features">
										<!-- <strong>Caracteristicas:</strong> -->
										<input type="text" name="features" placeholder="Caracteristicas"   value="<%= producto.features %>" >
									</label>
								</div>
								<div>
									<label for="description">
										<strong>Descripción:</strong>
										<textarea name="description"><%= producto.description %></textarea>
									</label>
								</div>
								<div>
									<label for="imagesProducto">
										<strong>Imagenes del producto:</strong>
									</label>
									<input type="file" name="imagesProducto" multiple>
								</div>
								<div id="boton">
									<input type="submit" value="Actualizar" class="botonPrimario" >
								</div>
							</form>
						<% } %>
					</div>
				</section>
		</main>
		<%- include('partials/Footer.ejs') %>
	</body>
</html>